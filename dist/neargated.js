(()=>{"use strict";const t=()=>{const t=document.getElementsByClassName("outer-div"),e=document.createElement("div");e.classList.add("menu-open");const n=document.createElement("span");return e.appendChild(n),e.onclick=function(){this.classList.toggle("close"),Array.from(t).forEach((t=>{"flex"==t.style.display?t.style.display="none":t.style.display="flex"}))},e},e=t=>{const e=document.createElement("h3");return e.textContent=`Hi ${t}`,e.classList.add("account-header"),e},n=document.querySelector(".vanilla-chatbot"),o=(o,a,c)=>{const s=(()=>{const t=document.createElement("button");t.textContent="Loading...",t.classList.add("button-loader");const e=document.createElement("span");return e.classList.add("button-text"),t.appendChild(e),t})(),d=(()=>{const t=document.createElement("div");t.classList.add("account-main");const e=document.createElement("img");e.classList.add("bot"),e.src="/src/assets/bot.png";const n=document.createElement("div");n.classList.add("account-details");const o=document.createElement("p");return o.classList.add("infoitem"),o.textContent="Please Login to your NEAR wallet to avail awesome discounts.",n.appendChild(o),t.appendChild(e),t.appendChild(n),t})(),l=t(),i=(()=>{const t=document.createElement("button");return t.textContent="Apply Discount",t.classList.add("discount-button"),t.onclick=function(){console.log("Discount Ok")},t})(),r=document.createElement("div");r.classList.add("outer-div");const u=document.createElement("div");u.classList.add("button-div");const p=(t=>{const e=document.createElement("button");return e.textContent="Sign in with NEAR",e.classList.add("login-button"),e.onclick=async()=>{u.appendChild(s),u.removeChild(p),await a.requestSignIn("rtb_v10.liv1.testnet").then((()=>{u.removeChild(s),console.log("ok")}))},e})(),m=(t=>{const e=document.createElement("button");return e.textContent="Logout",e.classList.add("logout-button"),e.onclick=async()=>{await a.signOut(),setTimeout((()=>{window.location.reload()}),400)},e})();if(n.appendChild(r),n.appendChild(l),1==o){var h=JSON.parse(localStorage.getItem("undefined_wallet_auth_key"));console.log(h.accountId),r.appendChild(e(h.accountId)),u.appendChild(m),r.appendChild((()=>{const t=document.createElement("div");t.classList.add("account-main");const e=document.createElement("div");e.classList.add("account-details-loggedin");const n=document.createElement("img");n.classList.add("bot-after"),n.src="/src/assets/bot.png";const o=document.createElement("p");return o.classList.add("infoitem"),o.textContent="Yay! You successfully connected your account.",e.appendChild(o),t.appendChild(n),t.appendChild(e),t})()),r.appendChild(i),r.appendChild(u)}else u.appendChild(p),r.appendChild(e("New User")),r.appendChild(d),r.appendChild(u)};window.onload=()=>{const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/near-api-js@0.45.1/dist/near-api-js.min.js",t.async=!0,t.onload=()=>{console.log("near loaded"),window.nearInitPromise=async function(){const t={keyStore:new nearApi.keyStores.BrowserLocalStorageKeyStore,networkId:"testnet",contractName:"rtb_v10.liv1.testnet",nodeUrl:"https://rpc.testnet.near.org",walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org",explorerUrl:"https://explorer.testnet.near.org"},e=await nearApi.connect({deps:{keyStore:new nearApi.keyStores.BrowserLocalStorageKeyStore},...t}),n=new nearApi.WalletConnection(e);let o;return n.getAccountId()&&(o={accountId:n.getAccountId(),balance:(await n.account().state()).amount,lockedBalance:(await n.account().state()).locked}),{contract:await new nearApi.Contract(n.account(),t.contractName,{viewMethods:["view_accounts_info"],changeMethods:["init"]}),currentAccount:o,nearConfig:t,wallet:n}}().then((({contract:t,currentAccount:e,nearConfig:n,wallet:a})=>{a.isSignedIn()?o(!0,a):o(!1,a)}))},document.body.append(t)}})();